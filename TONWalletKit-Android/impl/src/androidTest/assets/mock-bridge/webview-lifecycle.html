<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebView Lifecycle</title>
</head>
<body>
    <h1>Mock Bridge - WebView Lifecycle</h1>
    <script>
        function sendToAndroid(payload) {
            var message = JSON.stringify(payload);
            console.log('[Mock] Sending to Android:', message);
            if (window.WalletKitNative && window.WalletKitNative.postMessage) {
                window.WalletKitNative.postMessage(message);
            }
        }

        function sendReadyEvent(network, tonApiUrl) {
            sendToAndroid({ kind: 'ready', network: network || 'testnet', tonApiUrl: tonApiUrl || 'https://testnet.tonapi.io' });
        }

        function sendRpcResponse(id, result, error) {
            var payload = { kind: 'response', id: id };
            if (error) { payload.error = error; } else { payload.result = result || {}; }
            sendToAndroid(payload);
        }

        setTimeout(function() { sendReadyEvent('testnet'); }, 100);

        window.__walletkitCall = function(id, method, params) {
            console.log('[Mock] Call:', method);
            sendRpcResponse(id, { success: true });
        };
    </script>
</body>
</html>
